import{u as r,j as e,r as h,S as p,c as f,R as v}from"./styles.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function c(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=c(t);fetch(t.href,s)}})();function x(){const n=r(s=>s.streams),o=r(s=>s.source),c=r(s=>s.loading),l=r(s=>s.targetSlot),t=r(s=>s.assignStreamToTarget);return e.jsxs("section",{className:"mv-list","aria-label":"Streams",children:[e.jsxs("div",{className:"mv-list__head",children:[e.jsx("h2",{children:"Directory sandbox"}),e.jsxs("span",{children:[c?"Loading...":`${n.length} streams`," / ",o]})]}),e.jsxs("div",{className:"mv-list__subhead",children:["Target slot: ",l]}),e.jsx("div",{className:"mv-list__items",children:n.map(s=>e.jsxs("article",{className:"mv-list__item",children:[e.jsxs("div",{className:"mv-list__text",children:[e.jsx("strong",{children:s.channel}),e.jsx("span",{children:s.title})]}),e.jsxs("div",{className:"mv-list__actions",children:[e.jsx("span",{className:s.isLive?"mv-status is-live":"mv-status",children:s.isLive?"Live":"Offline"}),e.jsxs("button",{type:"button",className:"mv-list__add",onClick:()=>t(s.id),children:["Add to slot ",l]})]})]},s.id))})]})}function j(){const n=r(i=>i.source),o=r(i=>i.loading),c=r(i=>i.error),l=r(i=>i.focusMode),t=r(i=>i.activeSlot),s=r(i=>i.toggleFocusMode),a=r(i=>i.hydrateLiveStreams),m=r(i=>i.useFallbackStreams),d=r(i=>i.seedFromUrl);return h.useEffect(()=>{d(window.location.search),a()},[a,d]),e.jsxs("section",{className:"multiview-workbench","aria-label":"Multiview refactor sandbox",children:[e.jsxs("div",{className:"multiview-workbench__panel",children:[e.jsx("h2",{children:"Phase 2: slot-local updates"}),e.jsx("p",{children:"This sandbox uses per-slot subscriptions. Toggling focus or selecting a slot should update only affected slot cards."}),e.jsxs("div",{className:"multiview-workbench__toolbar",children:[e.jsx("button",{type:"button",className:"mv-list__add",onClick:s,children:l?"Disable focus mode":"Enable focus mode"}),e.jsx("button",{type:"button",className:"mv-list__add",onClick:()=>void a(),disabled:o,children:o?"Loading live...":"Reload live streams"}),e.jsx("button",{type:"button",className:"mv-list__add",onClick:m,children:"Use fallback"}),e.jsxs("span",{children:["Active slot: ",t]}),e.jsxs("span",{children:["Source: ",n]}),e.jsx("span",{children:"`iframe src` is stable across focus/target changes"})]}),c?e.jsxs("p",{className:"multiview-workbench__error",children:["Data note: ",c]}):null]}),e.jsxs("div",{className:"multiview-workbench__layout",children:[e.jsx(x,{}),e.jsx(p,{})]})]})}function g(){return e.jsxs("main",{className:"app-shell",children:[e.jsxs("header",{className:"app-shell__header",children:[e.jsx("p",{className:"app-shell__eyebrow",children:"React migration sandbox"}),e.jsx("h1",{className:"app-shell__title",children:"Multiview Refactor"}),e.jsx("p",{className:"app-shell__hint",children:"First slice: isolate slot rendering and preserve iframe mounts between UI interactions."})]}),e.jsx(j,{})]})}const u=document.getElementById("react-root");if(!u)throw new Error("Missing #react-root mount point");f.createRoot(u).render(e.jsx(v.StrictMode,{children:e.jsx(g,{})}));
